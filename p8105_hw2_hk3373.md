P8105 Homework 2
================
Hyun Kim (hk3373)
2024-10-02

# Problem 1

## Import and tidy NYC transit dataset:

``` r
nyc_transit_df = 
  read_csv("./data/NYC_Transit_Subway_Entrance_And_Exit_Data.csv",
           na = "",
           col_types = cols(
             `Route8` = col_character(),
             `Route9` = col_character(),
             `Route10` = col_character(),
             `Route11` = col_character()
           )) |>
  janitor::clean_names() |>
  select(line:entry, vending, ada) |>
  mutate(entry = 
           case_match(
             entry,
             "YES" ~ TRUE,
             "NO" ~ FALSE),
         entry = as.logical(entry))

str(nyc_transit_df)
```

    ## tibble [1,868 × 19] (S3: tbl_df/tbl/data.frame)
    ##  $ line             : chr [1:1868] "4 Avenue" "4 Avenue" "4 Avenue" "4 Avenue" ...
    ##  $ station_name     : chr [1:1868] "25th St" "25th St" "36th St" "36th St" ...
    ##  $ station_latitude : num [1:1868] 40.7 40.7 40.7 40.7 40.7 ...
    ##  $ station_longitude: num [1:1868] -74 -74 -74 -74 -74 ...
    ##  $ route1           : chr [1:1868] "R" "R" "N" "N" ...
    ##  $ route2           : chr [1:1868] NA NA "R" "R" ...
    ##  $ route3           : chr [1:1868] NA NA NA NA ...
    ##  $ route4           : chr [1:1868] NA NA NA NA ...
    ##  $ route5           : chr [1:1868] NA NA NA NA ...
    ##  $ route6           : chr [1:1868] NA NA NA NA ...
    ##  $ route7           : chr [1:1868] NA NA NA NA ...
    ##  $ route8           : chr [1:1868] NA NA NA NA ...
    ##  $ route9           : chr [1:1868] NA NA NA NA ...
    ##  $ route10          : chr [1:1868] NA NA NA NA ...
    ##  $ route11          : chr [1:1868] NA NA NA NA ...
    ##  $ entrance_type    : chr [1:1868] "Stair" "Stair" "Stair" "Stair" ...
    ##  $ entry            : logi [1:1868] TRUE TRUE TRUE TRUE TRUE TRUE ...
    ##  $ vending          : chr [1:1868] "YES" "YES" "YES" "YES" ...
    ##  $ ada              : logi [1:1868] FALSE FALSE FALSE FALSE FALSE FALSE ...

The dataset includes transit line, station name, latitude, longitude,
routes (from 1 to 11), entrance type, entry, vending and ada compliance.
The station’s latitude and longitude are numeric variables, while entry
and ada compliance are logical variables. The other variables, such as
line, station name, entrance type, vending and route1 to route11 are
character variables.

For the data cleaning process, NA values were defined when reading the
csv file, and route8 to route11 were converted to character variables
for consistency since route1 to route7 were character variables. The
dataset has a dimension of 1868 rows and 19 columns. The dataset is not
tidy since route number should be a variable including the values of all
routes, which can be resolved using the pivot_longer function.

### How many distinct stations are there?

``` r
num_station = nrow(nyc_transit_df |> 
                      distinct(line, station_name))
```

There are 465 distinct stations.

### How many stations are ADA compliant?

``` r
num_ada = nrow(nyc_transit_df |> 
                 filter(ada==TRUE) |> 
                 distinct(line, station_name))
```

84 stations are ADA compliant.

### What proportion of station entrances / exits without vending allow entrance?

``` r
prop_entrance = round(
  nrow(nyc_transit_df |> 
          filter(vending == "NO") |> 
          filter(entry == TRUE)) / 
     nrow(nyc_transit_df |>
            filter(vending == "NO")) * 100, 2)
```

37.7 percent of station entrances/exits without vending allow entrance.

## Reformat transit data:

``` r
nyc_transit_df = nyc_transit_df |>
  pivot_longer(
    route1:route11,
    names_to = "route_number",
    values_to = "route_name"
  ) |>
  relocate(route_number, route_name) |>
  drop_na()
```

### How many distinct stations serve the A train?

``` r
num_stations_A = nrow(nyc_transit_df |> 
                          filter(route_name == "A") |> 
                          distinct(line, station_name))
```

60 distinct stations serve the A train.

### Of the stations that serve the A train, how many are ADA compliant?

``` r
num_ada_A = nrow(nyc_transit_df |> 
                         filter(route_name == "A") |> 
                         filter(ada == TRUE) |> distinct(line, station_name))
```

17 of the stations that serve the A train are ADA compliant.
